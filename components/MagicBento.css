:root {
    /* Default (Light Mode) */
    --bento-bg: rgba(255, 255, 255, 0.8);
    --bento-border: rgba(226, 232, 240, 0.8);
    --bento-text-title: #0f172a;
    --bento-text-desc: #475569;
    --bento-glow-default: 0, 255, 157;
    /* Site Green */
}

.dark {
    /* Dark Mode */
    --bento-bg: #060010;
    --bento-border: #392e4e;
    --bento-text-title: #ffffff;
    --bento-text-desc: rgba(255, 255, 255, 0.9);
}

.card-grid {
    display: grid;
    gap: 0.5em;
    padding: 0.75em;
    max-width: 54em;
    font-size: clamp(1rem, 0.9rem + 0.5vw, 1.5rem);
}

.magic-bento-card {
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    position: relative;
    aspect-ratio: 4/3;
    min-height: 200px;
    width: 100%;
    max-width: 100%;
    padding: 1.25em;
    border-radius: 20px;
    border: 1px solid var(--bento-border);
    background: var(--bento-bg);
    backdrop-filter: blur(10px);
    font-weight: 300;
    overflow: hidden;
    transition: all 0.3s ease;

    --glow-x: 50%;
    --glow-y: 50%;
    --glow-intensity: 0;
    --glow-radius: 200px;
    /* Use --page-glow if defined, else default */
    --card-glow-rgb: var(--page-glow, var(--bento-glow-default));
}

.magic-bento-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.05);
}

.dark .magic-bento-card:hover {
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
}

.magic-bento-card__header,
.magic-bento-card__content {
    display: flex;
    position: relative;
    color: var(--bento-text-title);
    z-index: 2;
}

.magic-bento-card__header {
    gap: 0.75em;
    justify-content: space-between;
}

.magic-bento-card__content {
    flex-direction: column;
}

.magic-bento-card__label {
    font-size: 16px;
    color: var(--bento-text-desc);
    font-weight: 500;
}

.magic-bento-card__title,
.magic-bento-card__description {
    --clamp-title: 1;
    --clamp-desc: 2;
}

.magic-bento-card__title {
    font-weight: 600;
    font-size: 18px;
    margin: 0 0 0.25em;
    color: var(--bento-text-title);
}

.magic-bento-card__description {
    font-size: 14px;
    line-height: 1.4;
    color: var(--bento-text-desc);
}

.magic-bento-card--text-autohide .magic-bento-card__title,
.magic-bento-card--text-autohide .magic-bento-card__description {
    display: -webkit-box;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
}

.magic-bento-card--text-autohide .magic-bento-card__title {
    -webkit-line-clamp: var(--clamp-title);
    line-clamp: var(--clamp-title);
}

.magic-bento-card--text-autohide .magic-bento-card__description {
    -webkit-line-clamp: var(--clamp-desc);
    line-clamp: var(--clamp-desc);
}

@media (max-width: 599px) {
    .card-grid {
        grid-template-columns: 1fr;
        width: 90%;
        margin: 0 auto;
        padding: 0.5em;
    }

    .magic-bento-card {
        width: 100%;
        min-height: 180px;
    }
}

@media (min-width: 600px) {
    .card-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (min-width: 1024px) {
    .card-grid {
        grid-template-columns: repeat(4, 1fr);
    }

    .magic-bento-card:nth-child(3) {
        grid-column: span 2;
        grid-row: span 2;
    }

    .magic-bento-card:nth-child(4) {
        grid-column: 1 / span 2;
        grid-row: 2 / span 2;
    }

    .magic-bento-card:nth-child(6) {
        grid-column: 4;
        grid-row: 3;
    }
}

/* Border glow effect */
.magic-bento-card--border-glow::after {
    content: '';
    position: absolute;
    inset: 0;
    padding: 6px;
    background: radial-gradient(var(--glow-radius) circle at var(--glow-x) var(--glow-y),
            rgba(var(--card-glow-rgb), calc(var(--glow-intensity) * 0.8)) 0%,
            rgba(var(--card-glow-rgb), calc(var(--glow-intensity) * 0.4)) 30%,
            transparent 60%);
    border-radius: inherit;
    -webkit-mask:
        linear-gradient(#fff 0 0) content-box,
        linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask:
        linear-gradient(#fff 0 0) content-box,
        linear-gradient(#fff 0 0);
    mask-composite: exclude;
    pointer-events: none;
    opacity: 1;
    transition: opacity 0.3s ease;
    z-index: 1;
}

.magic-bento-card--border-glow:hover::after {
    opacity: 1;
}

/* Glow effects on hover */
.magic-bento-card--border-glow:hover {
    border-color: rgba(var(--card-glow-rgb), 0.5);
}

.particle-container {
    position: relative;
    overflow: hidden;
}

.particle::before {
    content: '';
    position: absolute;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    background: rgba(var(--card-glow-rgb), 0.3);
    border-radius: 50%;
    z-index: -1;
}

/* Global spotlight styles */
.global-spotlight {
    mix-blend-mode: screen;
    /* Works best for light on dark */
    will-change: transform, opacity;
    z-index: 200 !important;
    pointer-events: none;
    /* In light mode, screen blend mode might wash out. Normal or multiply might be better? 
     For 'glow', screen is usually correct, but on white bg it's invisible. 
     We might need media query to change blend mode if needed, but for now relying on darker colors or just subtle glow.
     Actually, glowing on white requires a darker color to be visible or 'multiply' mode, but 'multiply' doesn't look like a glow.
     Common trick: use a slightly darker radial gradient for light mode shadow/glow or just rely on border glow.
  */
}

/* Adjust spotlight visibility in light mode if needed */
@media (prefers-color-scheme: light) {
    /* You might want a different blend mode for light theme if using 'dark' class strategy. 
     Since we use .dark class in nextjs, we can target root vs .dark */
}

/* Only apply screen blend in dark mode */
.dark .global-spotlight {
    mix-blend-mode: screen;
}

/* In light mode, simple transparency or multiply */
:not(.dark) .global-spotlight {
    mix-blend-mode: normal;
    filter: blur(20px);
}